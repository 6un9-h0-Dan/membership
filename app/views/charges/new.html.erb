<div id="checkout" class="one-time-donation">
  <div class="content">
    <section id="checkout-plan">
      <h4>Pay what you can. Every dollar counts.</h4>
      <p>“To each according to their ability, to each according to their need.” Contributing what you can, where you can is what we’re all about.</p>
      <p>Folks who donate $100 on a one-time basis will receive a free gift from our store. People who pay dues at the rate of $100 per month or more will receive a thank you call from us.</p>
    </section>
    <section id='checkout-payment'>
    <%= form_with(model: Donation, url: {controller: "charges", action: :create }, local: true, id: 'payment-form') do |form| %>
      <div>
        <% if flash[:error].present? %>
          <div id="error_explanation">
            <p><%= flash[:error] %></p>
          </div>
        <% end %>
        <div id="card-errors" role="alert"></div>
        <div class="form-row">
          <label for="card-element">
            Credit or debit card
          </label>
          <div id="card-element">
            <!-- A Stripe Element will be inserted here. -->
          </div>

          <!-- Used to display form errors. -->
        </div>

        <%= form.number_field :amount, step: 1, placeholder: '$0', class: 'input-field', id: 'amount-field' %>

        <%= recaptcha_tags %>
        <button id="submit-payment" class="button primary">Make my donation</button>
      </div>

    <% end %>
    </section>
  </div>
</div>

<%= render 'shared/stripe_scripts'%>
